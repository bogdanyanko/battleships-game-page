{"ast":null,"code":"import _objectSpread from\"/home/bohdan/Desktop/work/GH/battleships-game-page/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/home/bohdan/Desktop/work/GH/battleships-game-page/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React from'react';import{useEffect}from'react';import ComputerSquare from'./ComputerSquare';import{jsx as _jsx}from\"react/jsx-runtime\";var ComputerGrid=function ComputerGrid(_ref){var computerGameGrid=_ref.computerGameGrid,setComputerGameGrid=_ref.setComputerGameGrid,computerShipYard=_ref.computerShipYard,setComputerShipYard=_ref.setComputerShipYard,computerShotGenerator=_ref.computerShotGenerator,playerPlacedShipsNumber=_ref.playerPlacedShipsNumber,winnerInfo=_ref.winnerInfo,setWinnerInfo=_ref.setWinnerInfo;//const [shipDirection, setShipDirection] = useState(['horizontal']);\nvar squareShotHandler=function squareShotHandler(rowIndex,columnIndex){var computerGameGridCopy=_toConsumableArray(computerGameGrid);computerGameGridCopy[rowIndex]=_toConsumableArray(computerGameGridCopy[rowIndex]);if(computerGameGrid[rowIndex][columnIndex]==='.'){computerGameGridCopy[rowIndex][columnIndex]='M';setComputerGameGrid(_toConsumableArray(computerGameGridCopy));computerShotGenerator();}else if(computerGameGrid[rowIndex][columnIndex]==='M'||computerGameGrid[rowIndex][columnIndex]==='X'){console.log(\"This move is not allowed!\");}else{shipHitHandler(computerGameGridCopy[rowIndex][columnIndex]);computerGameGridCopy[rowIndex][columnIndex]='X';setComputerGameGrid(_toConsumableArray(computerGameGridCopy));computerShotGenerator();}};var shipHitHandler=function shipHitHandler(shipNumber){var computerShipYardCopy=_toConsumableArray(computerShipYard);var hitNumberCopy=computerShipYardCopy[shipNumber].hitNumber;computerShipYardCopy[shipNumber]=_objectSpread(_objectSpread({},computerShipYardCopy[shipNumber]),{},{hitNumber:hitNumberCopy+1});if(computerShipYardCopy[shipNumber].hitNumber===computerShipYardCopy[shipNumber].shipLength){computerShipYardCopy[shipNumber]=_objectSpread(_objectSpread({},computerShipYardCopy[shipNumber]),{},{sunkStatus:true});}setComputerShipYard(computerShipYardCopy);};useEffect(function(){var availableShips=computerShipYard.filter(function(ship){return ship.sunkStatus===false;});if(availableShips.length===0){setWinnerInfo('You are a winner! Congratulations!ðŸŽ‰');}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[computerShipYard]);return/*#__PURE__*/_jsx(\"div\",{className:\"computerGrid\",children:computerGameGrid===null||computerGameGrid===void 0?void 0:computerGameGrid.map(function(squaresArray,arrayNumber){return/*#__PURE__*/_jsx(React.Fragment,{children:squaresArray===null||squaresArray===void 0?void 0:squaresArray.map(function(square,squareNumber){return/*#__PURE__*/_jsx(ComputerSquare,{insideText:square,rowIndex:arrayNumber,columnIndex:squareNumber,computerGameGrid:computerGameGrid,squareShotHandler:squareShotHandler,playerPlacedShipsNumber:playerPlacedShipsNumber,winnerInfo:winnerInfo},\"\".concat(arrayNumber).concat(squareNumber));})},arrayNumber);})});};export default ComputerGrid;","map":{"version":3,"sources":["/home/bohdan/Desktop/work/GH/battleships-game-page/src/components/ComputerGrid.js"],"names":["React","useEffect","ComputerSquare","ComputerGrid","computerGameGrid","setComputerGameGrid","computerShipYard","setComputerShipYard","computerShotGenerator","playerPlacedShipsNumber","winnerInfo","setWinnerInfo","squareShotHandler","rowIndex","columnIndex","computerGameGridCopy","console","log","shipHitHandler","shipNumber","computerShipYardCopy","hitNumberCopy","hitNumber","shipLength","sunkStatus","availableShips","filter","ship","length","map","squaresArray","arrayNumber","square","squareNumber"],"mappings":"uRAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,KAA0B,OAA1B,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,C,2CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAAiK,IAA9JC,CAAAA,gBAA8J,MAA9JA,gBAA8J,CAA5IC,mBAA4I,MAA5IA,mBAA4I,CAAvHC,gBAAuH,MAAvHA,gBAAuH,CAArGC,mBAAqG,MAArGA,mBAAqG,CAAhFC,qBAAgF,MAAhFA,qBAAgF,CAAzDC,uBAAyD,MAAzDA,uBAAyD,CAAhCC,UAAgC,MAAhCA,UAAgC,CAApBC,aAAoB,MAApBA,aAAoB,CAEpL;AAEA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,QAAD,CAAWC,WAAX,CAA2B,CACnD,GAAMC,CAAAA,oBAAoB,oBAAOX,gBAAP,CAA1B,CACAW,oBAAoB,CAACF,QAAD,CAApB,oBAAqCE,oBAAoB,CAACF,QAAD,CAAzD,EACA,GAAGT,gBAAgB,CAACS,QAAD,CAAhB,CAA2BC,WAA3B,IAA4C,GAA/C,CAAoD,CAClDC,oBAAoB,CAACF,QAAD,CAApB,CAA+BC,WAA/B,EAA8C,GAA9C,CACAT,mBAAmB,oBAAKU,oBAAL,EAAnB,CACAP,qBAAqB,GACtB,CAJD,IAIO,IAAGJ,gBAAgB,CAACS,QAAD,CAAhB,CAA2BC,WAA3B,IAA4C,GAA5C,EAAmDV,gBAAgB,CAACS,QAAD,CAAhB,CAA2BC,WAA3B,IAA4C,GAAlG,CAAuG,CAC5GE,OAAO,CAACC,GAAR,CAAY,2BAAZ,EACD,CAFM,IAEA,CACLC,cAAc,CAACH,oBAAoB,CAACF,QAAD,CAApB,CAA+BC,WAA/B,CAAD,CAAd,CACAC,oBAAoB,CAACF,QAAD,CAApB,CAA+BC,WAA/B,EAA8C,GAA9C,CACAT,mBAAmB,oBAAKU,oBAAL,EAAnB,CACAP,qBAAqB,GACtB,CACF,CAfD,CAiBA,GAAMU,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,UAAD,CAAgB,CACrC,GAAMC,CAAAA,oBAAoB,oBAAOd,gBAAP,CAA1B,CACA,GAAMe,CAAAA,aAAa,CAAGD,oBAAoB,CAACD,UAAD,CAApB,CAAiCG,SAAvD,CACAF,oBAAoB,CAACD,UAAD,CAApB,gCAAuCC,oBAAoB,CAACD,UAAD,CAA3D,MAAyEG,SAAS,CAAED,aAAa,CAAG,CAApG,GAEA,GAAID,oBAAoB,CAACD,UAAD,CAApB,CAAiCG,SAAjC,GAA+CF,oBAAoB,CAACD,UAAD,CAApB,CAAiCI,UAApF,CAAgG,CAC9FH,oBAAoB,CAACD,UAAD,CAApB,gCAAuCC,oBAAoB,CAACD,UAAD,CAA3D,MAAyEK,UAAU,CAAE,IAArF,GACD,CACDjB,mBAAmB,CAACa,oBAAD,CAAnB,CACD,CATD,CAWAnB,SAAS,CAAC,UAAM,CACd,GAAIwB,CAAAA,cAAc,CAAGnB,gBAAgB,CAACoB,MAAjB,CAAwB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACH,UAAL,GAAoB,KAAxB,EAA5B,CAArB,CACA,GAAIC,cAAc,CAACG,MAAf,GAA0B,CAA9B,CAAiC,CAC/BjB,aAAa,CAAC,sCAAD,CAAb,CACD,CACH;AACC,CANQ,CAMN,CAACL,gBAAD,CANM,CAAT,CAQA,mBACE,YAAK,SAAS,CAAC,cAAf,UACGF,gBADH,SACGA,gBADH,iBACGA,gBAAgB,CAAEyB,GAAlB,CAAsB,SAACC,YAAD,CAAeC,WAAf,CAA+B,CACpD,mBACE,KAAC,KAAD,CAAO,QAAP,WACGD,YADH,SACGA,YADH,iBACGA,YAAY,CAAED,GAAd,CAAkB,SAACG,MAAD,CAASC,YAAT,CAA0B,CAC3C,mBACE,KAAC,cAAD,EAEE,UAAU,CAAED,MAFd,CAGE,QAAQ,CAAED,WAHZ,CAIE,WAAW,CAAEE,YAJf,CAKE,gBAAgB,CAAE7B,gBALpB,CAME,iBAAiB,CAAEQ,iBANrB,CAOE,uBAAuB,CAAEH,uBAP3B,CAQE,UAAU,CAAEC,UARd,YACUqB,WADV,SACwBE,YADxB,EADF,CAaD,CAdA,CADH,EAAqBF,WAArB,CADF,CAkBD,CAnBA,CADH,EADF,CAwBD,CAhED,CAkEA,cAAe5B,CAAAA,YAAf","sourcesContent":["import React from 'react';\r\nimport { useEffect } from 'react';\r\nimport ComputerSquare from './ComputerSquare';\r\n\r\nconst ComputerGrid = ({ computerGameGrid, setComputerGameGrid, computerShipYard, setComputerShipYard, computerShotGenerator, playerPlacedShipsNumber, winnerInfo, setWinnerInfo }) => {\r\n  \r\n  //const [shipDirection, setShipDirection] = useState(['horizontal']);\r\n\r\n  const squareShotHandler = (rowIndex, columnIndex) => {\r\n    const computerGameGridCopy = [...computerGameGrid];\r\n    computerGameGridCopy[rowIndex] = [...computerGameGridCopy[rowIndex]];\r\n    if(computerGameGrid[rowIndex][columnIndex] === '.') {\r\n      computerGameGridCopy[rowIndex][columnIndex] = 'M';\r\n      setComputerGameGrid([...computerGameGridCopy]);\r\n      computerShotGenerator();\r\n    } else if(computerGameGrid[rowIndex][columnIndex] === 'M' || computerGameGrid[rowIndex][columnIndex] === 'X') {\r\n      console.log(\"This move is not allowed!\");\r\n    } else {\r\n      shipHitHandler(computerGameGridCopy[rowIndex][columnIndex]); \r\n      computerGameGridCopy[rowIndex][columnIndex] = 'X';\r\n      setComputerGameGrid([...computerGameGridCopy]);\r\n      computerShotGenerator();\r\n    }\r\n  }\r\n\r\n  const shipHitHandler = (shipNumber) => {\r\n    const computerShipYardCopy = [...computerShipYard];\r\n    const hitNumberCopy = computerShipYardCopy[shipNumber].hitNumber;\r\n    computerShipYardCopy[shipNumber] = {...computerShipYardCopy[shipNumber], hitNumber: hitNumberCopy + 1};\r\n\r\n    if (computerShipYardCopy[shipNumber].hitNumber === computerShipYardCopy[shipNumber].shipLength) {\r\n      computerShipYardCopy[shipNumber] = {...computerShipYardCopy[shipNumber], sunkStatus: true};\r\n    }\r\n    setComputerShipYard(computerShipYardCopy);\r\n  }\r\n\r\n  useEffect(() => {\r\n    let availableShips = computerShipYard.filter(ship => ship.sunkStatus === false);\r\n    if (availableShips.length === 0) {\r\n      setWinnerInfo('You are a winner! Congratulations!ðŸŽ‰');\r\n    }\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [computerShipYard]);\r\n\r\n  return (\r\n    <div className='computerGrid'>\r\n      {computerGameGrid?.map((squaresArray, arrayNumber) => {\r\n        return (\r\n          <React.Fragment key={arrayNumber}>\r\n            {squaresArray?.map((square, squareNumber) => {\r\n              return (\r\n                <ComputerSquare \r\n                  key={`${arrayNumber}${squareNumber}`}\r\n                  insideText={square}\r\n                  rowIndex={arrayNumber}\r\n                  columnIndex={squareNumber}\r\n                  computerGameGrid={computerGameGrid}\r\n                  squareShotHandler={squareShotHandler}\r\n                  playerPlacedShipsNumber={playerPlacedShipsNumber}\r\n                  winnerInfo={winnerInfo}\r\n                >\r\n                </ComputerSquare>\r\n              )\r\n            })}\r\n          </React.Fragment>);\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ComputerGrid;"]},"metadata":{},"sourceType":"module"}